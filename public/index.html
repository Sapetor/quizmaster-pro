<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuizMaster Pro - Interactive Quiz Platform</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                packages: {'[+]': ['ams', 'newcommand', 'configmacros']},
                processEscapes: true,
                processEnvironments: true,
                tags: 'none'
            },
            chtml: {
                scale: 1,
                minScale: 0.5,
                matchFontHeight: false,
                displayAlign: 'center',
                displayIndent: '0em'
            },
            startup: {
                ready: () => {
                    console.log('MathJax is ready');
                    MathJax.startup.defaultReady();
                }
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
                includeHtmlTags: {br: '\n', wbr: '', '#comment': ''}
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>QuizMaster Pro</h1>
            <div class="header-controls">
                <button id="fullscreen-toggle" class="theme-toggle" title="Toggle fullscreen (F11)">‚õ∂</button>
                <button id="theme-toggle" class="theme-toggle" title="Toggle dark mode">üåô</button>
            </div>
        </header>

        <div id="main-menu" class="screen active">
            <div class="menu-options">
                <button id="host-btn" class="btn primary">Host a Game</button>
                <button id="join-btn" class="btn secondary">Join Game</button>
            </div>
        </div>

        <div id="host-screen" class="screen">
            <!-- Left Toolbar -->
            <div class="left-toolbar" id="left-toolbar" style="display: none;">
                <div class="toolbar-section">
                    <h5>Quick Actions</h5>
                    <button class="toolbar-btn" id="toolbar-add-question" title="Add Question">
                        <span class="toolbar-icon">‚ûï</span>
                        <span class="toolbar-label">Add Q</span>
                    </button>
                    <button class="toolbar-btn" id="toolbar-save" title="Save Quiz">
                        <span class="toolbar-icon">üíæ</span>
                        <span class="toolbar-label">Save</span>
                    </button>
                    <button class="toolbar-btn" id="toolbar-load" title="Load Quiz">
                        <span class="toolbar-icon">üìÇ</span>
                        <span class="toolbar-label">Load</span>
                    </button>
                </div>
                
                <div class="toolbar-section">
                    <h5>Tools</h5>
                    <button class="toolbar-btn" id="toolbar-ai-gen" title="AI Generator">
                        <span class="toolbar-icon">ü§ñ</span>
                        <span class="toolbar-label">AI Gen</span>
                    </button>
                    <button class="toolbar-btn" id="toolbar-preview" title="Toggle Preview">
                        <span class="toolbar-icon">üì±</span>
                        <span class="toolbar-label">Preview</span>
                    </button>
                    <button class="toolbar-btn" id="toolbar-import" title="Import File">
                        <span class="toolbar-icon">üì•</span>
                        <span class="toolbar-label">Import</span>
                    </button>
                </div>
                
                <div class="toolbar-section">
                    <h5>Navigate</h5>
                    <button class="toolbar-btn" id="toolbar-top" title="Back to Top">
                        <span class="toolbar-icon">‚¨ÜÔ∏è</span>
                        <span class="toolbar-label">Top</span>
                    </button>
                    <button class="toolbar-btn" id="toolbar-bottom" title="Go to Bottom">
                        <span class="toolbar-icon">‚¨áÔ∏è</span>
                        <span class="toolbar-label">Bottom</span>
                    </button>
                </div>
                
                <div class="toolbar-section">
                    <h5>Settings</h5>
                    <button class="toolbar-btn" id="toolbar-preview-settings" title="Preview Settings">
                        <span class="toolbar-icon">‚öôÔ∏è</span>
                        <span class="toolbar-label">Preview</span>
                    </button>
                </div>
                
                <div class="toolbar-section toolbar-toggle">
                    <button class="toolbar-btn" id="toolbar-collapse" title="Collapse Toolbar">
                        <span class="toolbar-icon">‚óÄÔ∏è</span>
                        <span class="toolbar-label">Hide</span>
                    </button>
                </div>
            </div>
            
            <div class="host-container" id="host-container">
                <div class="quiz-editor-section" id="quiz-editor-section">
                    <h2>Create Your Quiz</h2>
                    
                    <div class="quiz-builder">
                    <input type="text" id="quiz-title" placeholder="Quiz Title" class="input-field">
                    
                    <div class="quiz-settings">
                        <label>
                            <input type="checkbox" id="randomize-questions"> Randomize question order
                        </label>
                        <label>
                            <input type="checkbox" id="randomize-answers"> Randomize answer positions
                        </label>
                        <div class="time-settings">
                            <label>
                                <input type="checkbox" id="use-global-time" onchange="toggleGlobalTime()"> Use same time for all questions
                            </label>
                            <div id="global-time-container" style="display: none;">
                                <label>
                                    Global time limit (seconds):
                                    <input type="number" id="global-time-limit" min="5" max="300" value="20" class="time-input">
                                </label>
                            </div>
                        </div>
                        
                        <div class="preview-settings">
                            <div class="utility-buttons">
                                <button id="toggle-preview" class="btn secondary small" onclick="togglePreviewMode()">üì± Live Preview</button>
                                <button id="ai-generator-btn" class="btn secondary small" onclick="openAIGeneratorModal()">ü§ñ AI Generator</button>
                                <button id="toggle-toolbar" class="btn secondary small desktop-only" onclick="toggleToolbar()">üõ†Ô∏è Toolbar</button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="questions-container">
                        <div class="question-item" data-question="0">
                            <h3>Question 1</h3>
                            
                            <div class="question-meta">
                                <select class="question-type" onchange="updateQuestionType(this)">
                                    <option value="multiple-choice">Multiple Choice</option>
                                    <option value="multiple-correct">Multiple Correct Answers</option>
                                    <option value="true-false">True/False</option>
                                    <option value="numeric">Numeric Answer</option>
                                </select>
                                
                                <select class="question-difficulty">
                                    <option value="easy">Easy (100 pts)</option>
                                    <option value="medium" selected>Medium (200 pts)</option>
                                    <option value="hard">Hard (300 pts)</option>
                                </select>
                                
                                <div class="time-limit-container">
                                    <label>
                                        Time (sec):
                                        <input type="number" class="question-time-limit" min="5" max="300" value="20" onchange="updateTimeLimit(this)">
                                    </label>
                                </div>
                            </div>
                            
                            <div class="question-content">
                                <textarea class="question-text" placeholder="Enter your question (supports LaTeX: $x^2 + y^2 = z^2$)"></textarea>
                                
                                <div class="image-upload">
                                    <label>Add Image (optional):</label>
                                    <input type="file" class="image-input" accept="image/*" onchange="uploadImage(this)">
                                    <div class="image-preview" style="display: none;">
                                        <img class="question-image" src="" alt="Question Image" style="max-width: 200px; max-height: 150px;">
                                        <button type="button" class="remove-image" onclick="removeImage(this)">Remove</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="answer-options multiple-choice-options">
                                <div class="options">
                                    <input type="text" class="option" data-option="0" placeholder="Option A">
                                    <input type="text" class="option" data-option="1" placeholder="Option B">
                                    <input type="text" class="option" data-option="2" placeholder="Option C">
                                    <input type="text" class="option" data-option="3" placeholder="Option D">
                                </div>
                                <select class="correct-answer">
                                    <option value="0">A is correct</option>
                                    <option value="1">B is correct</option>
                                    <option value="2">C is correct</option>
                                    <option value="3">D is correct</option>
                                </select>
                            </div>
                            
                            <div class="answer-options multiple-correct-options" style="display: none;">
                                <div class="options-checkboxes">
                                    <label><input type="checkbox" class="correct-option" data-option="0"> <input type="text" class="option" placeholder="Option A"></label>
                                    <label><input type="checkbox" class="correct-option" data-option="1"> <input type="text" class="option" placeholder="Option B"></label>
                                    <label><input type="checkbox" class="correct-option" data-option="2"> <input type="text" class="option" placeholder="Option C"></label>
                                    <label><input type="checkbox" class="correct-option" data-option="3"> <input type="text" class="option" placeholder="Option D"></label>
                                </div>
                            </div>
                            
                            <div class="answer-options true-false-options" style="display: none;">
                                <select class="correct-answer">
                                    <option value="true">True</option>
                                    <option value="false">False</option>
                                </select>
                            </div>
                            
                            <div class="answer-options numeric-options" style="display: none;">
                                <label>Correct Answer:</label>
                                <input type="number" class="numeric-answer" placeholder="Enter numeric answer" step="any">
                                <label>Tolerance (+/-):</label>
                                <input type="number" class="numeric-tolerance" placeholder="0.1" step="any" value="0.1">
                            </div>
                        </div>
                    </div>
                    
                    <div class="quiz-actions">
                        <button id="add-question" class="btn secondary">Add Question</button>
                        <button id="save-quiz" class="btn secondary">Save Quiz</button>
                        <button id="load-quiz" class="btn secondary">Load Quiz</button>
                        <button id="import-quiz" class="btn secondary">Import CSV/JSON</button>
                        <button id="preview-quiz" class="btn secondary">Preview Quiz</button>
                        <button id="start-hosting" class="btn primary">üöÄ Start Game</button>
                    </div>
                    
                    <input type="file" id="import-file-input" accept=".csv,.json" style="display: none;">
                    
                    <!-- Back to Top Button -->
                    <button id="back-to-top" class="back-to-top-btn" style="display: none;" title="Back to Top">
                        ‚¨ÜÔ∏è
                    </button>
                    </div>
                </div>
                
                <!-- Live Preview Section -->
                <div class="quiz-preview-section" id="quiz-preview-section" style="display: none;">
                    <div class="preview-header">
                        <h4>Live Preview</h4>
                        <div class="preview-device-toggle">
                            <button id="desktop-view-split" class="device-btn active" onclick="setPreviewDevice('desktop')">Desktop</button>
                            <button id="mobile-view-split" class="device-btn" onclick="setPreviewDevice('mobile')">Mobile</button>
                        </div>
                    </div>
                    
                    <div class="preview-navigation-bar">
                        <button id="preview-prev-split" class="nav-btn">‚óÄ</button>
                        <span id="preview-question-counter-split">Q1/1</span>
                        <button id="preview-next-split" class="nav-btn">‚ñ∂</button>
                        <button id="scroll-to-question" class="nav-btn edit-btn" onclick="scrollToCurrentQuestion()">‚úèÔ∏è Edit Question</button>
                    </div>
                    
                    <div id="preview-viewport-split" class="preview-viewport-split desktop-viewport">
                        <div id="preview-content-split" class="preview-content-split">
                            <div class="player-question-area">
                                <div id="preview-question-counter-display-split">Question 1 of 1</div>
                                <div id="preview-question-text-split">Select a question to preview</div>
                                <div id="preview-question-image-split" style="display: none;">
                                    <img id="preview-question-img-split" src="" alt="Question Image">
                                </div>
                            </div>
                            
                            <div id="preview-answer-area-split">
                                <!-- Multiple Choice Preview -->
                                <div id="preview-multiple-choice-split" class="preview-answer-type" style="display: none;">
                                    <div class="player-options">
                                        <div class="player-option preview-option" data-option="0">A: Option 1</div>
                                        <div class="player-option preview-option" data-option="1">B: Option 2</div>
                                        <div class="player-option preview-option" data-option="2">C: Option 3</div>
                                        <div class="player-option preview-option" data-option="3">D: Option 4</div>
                                    </div>
                                </div>
                                
                                <!-- Multiple Correct Preview -->
                                <div id="preview-multiple-correct-split" class="preview-answer-type" style="display: none;">
                                    <div class="player-checkbox-options">
                                        <div class="checkbox-option preview-checkbox" data-option="0">
                                            <input type="checkbox" disabled> A: Option 1
                                        </div>
                                        <div class="checkbox-option preview-checkbox" data-option="1">
                                            <input type="checkbox" disabled> B: Option 2
                                        </div>
                                        <div class="checkbox-option preview-checkbox" data-option="2">
                                            <input type="checkbox" disabled> C: Option 3
                                        </div>
                                        <div class="checkbox-option preview-checkbox" data-option="3">
                                            <input type="checkbox" disabled> D: Option 4</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- True/False Preview -->
                                <div id="preview-true-false-split" class="preview-answer-type" style="display: none;">
                                    <div class="true-false-options">
                                        <div class="tf-option preview-tf" data-option="true">True</div>
                                        <div class="tf-option preview-tf" data-option="false">False</div>
                                    </div>
                                </div>
                                
                                <!-- Numeric Preview -->
                                <div id="preview-numeric-split" class="preview-answer-type" style="display: none;">
                                    <div class="numeric-input-container">
                                        <input type="number" id="preview-numeric-input-split" placeholder="Enter your answer" disabled>
                                        <button class="btn primary" disabled>Submit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Preview Modal Overlay -->
        <div id="preview-modal-overlay" class="modal-overlay" style="display: none;">
            <div id="preview-modal" class="preview-modal">
                <div class="preview-modal-header">
                    <div class="preview-title-section">
                        <h2>üì± Question Preview</h2>
                        <div class="preview-device-toggle">
                            <button id="desktop-view" class="device-btn active" onclick="setPreviewDevice('desktop')">üíª Desktop</button>
                            <button id="mobile-view" class="device-btn" onclick="setPreviewDevice('mobile')">üì± Mobile</button>
                        </div>
                    </div>
                    <button id="close-preview" class="close-btn" onclick="closePreviewModal()">√ó</button>
                </div>
                
                <div class="preview-navigation-bar">
                    <button id="preview-prev" class="nav-btn">‚óÄ Previous</button>
                    <span id="preview-question-counter">Question 1 of 1</span>
                    <button id="preview-next" class="nav-btn">Next ‚ñ∂</button>
                </div>
                
                <div id="preview-viewport" class="preview-viewport desktop-viewport">
                    <div id="preview-content" class="preview-content">
                        <div class="player-question-area">
                            <div id="preview-question-counter-display">Question 1 of 1</div>
                            <div id="preview-question-text">Select a question to preview</div>
                            <div id="preview-question-image" style="display: none;">
                                <img id="preview-question-img" src="" alt="Question Image">
                            </div>
                        </div>
                        
                        <div id="preview-answer-area">
                            <!-- Multiple Choice Preview -->
                            <div id="preview-multiple-choice" class="preview-answer-type" style="display: none;">
                                <div class="player-options">
                                    <div class="player-option preview-option" data-option="0">A: Option 1</div>
                                    <div class="player-option preview-option" data-option="1">B: Option 2</div>
                                    <div class="player-option preview-option" data-option="2">C: Option 3</div>
                                    <div class="player-option preview-option" data-option="3">D: Option 4</div>
                                </div>
                            </div>
                            
                            <!-- Multiple Correct Preview -->
                            <div id="preview-multiple-correct" class="preview-answer-type" style="display: none;">
                                <div class="player-checkbox-options">
                                    <div class="checkbox-option preview-checkbox" data-option="0">
                                        <input type="checkbox" disabled> A: Option 1
                                    </div>
                                    <div class="checkbox-option preview-checkbox" data-option="1">
                                        <input type="checkbox" disabled> B: Option 2
                                    </div>
                                    <div class="checkbox-option preview-checkbox" data-option="2">
                                        <input type="checkbox" disabled> C: Option 3
                                    </div>
                                    <div class="checkbox-option preview-checkbox" data-option="3">
                                        <input type="checkbox" disabled> D: Option 4
                                    </div>
                                </div>
                            </div>
                            
                            <!-- True/False Preview -->
                            <div id="preview-true-false" class="preview-answer-type" style="display: none;">
                                <div class="true-false-options">
                                    <div class="tf-option preview-tf" data-option="true">True</div>
                                    <div class="tf-option preview-tf" data-option="false">False</div>
                                </div>
                            </div>
                            
                            <!-- Numeric Preview -->
                            <div id="preview-numeric" class="preview-answer-type" style="display: none;">
                                <div class="numeric-input-container">
                                    <input type="number" id="preview-numeric-input" placeholder="Enter your answer" disabled>
                                    <button class="btn primary" disabled>Submit</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="game-lobby" class="screen">
            <div class="lobby-container">
                <h2>Game PIN</h2>
                <div id="game-pin" class="pin-display">------</div>
                
                <div class="qr-section">
                    <h3>Share Game</h3>
                    <div id="qr-code-container" class="qr-container">
                        <div class="qr-loading">Generating QR Code...</div>
                        <img id="qr-code-image" style="display: none;" alt="QR Code to join game">
                    </div>
                    <p id="game-url" class="game-url"></p>
                </div>
                
                <h3>Players Joined</h3>
                <div id="players-list" class="players-grid"></div>
                <button id="start-game" class="btn primary">Start Game</button>
            </div>
        </div>

        <div id="host-game-screen" class="screen">
            <div class="game-container">
                <div class="question-display">
                    <div class="question-header">
                        <span id="question-counter">Question 1 of 5</span>
                        <div id="timer" class="timer">20</div>
                    </div>
                    <div id="question-image-display" class="question-image-container" style="display: none;">
                        <img id="host-question-image" src="" alt="Question Image">
                    </div>
                    <h2 id="current-question">Question will appear here</h2>
                    <div id="answer-options" class="options-grid">
                        <div class="option-display" data-option="0">A</div>
                        <div class="option-display" data-option="1">B</div>
                        <div class="option-display" data-option="2">C</div>
                        <div class="option-display" data-option="3">D</div>
                    </div>
                    
                    <!-- Real-time Answer Statistics -->
                    <div id="answer-statistics" class="answer-stats" style="display: none;">
                        <h3>Live Answer Statistics</h3>
                        <div class="stats-grid">
                            <div class="stat-item" data-option="0">
                                <span class="option-label">A</span>
                                <div class="stat-bar">
                                    <div class="stat-fill" style="width: 0%"></div>
                                </div>
                                <span class="stat-count">0</span>
                            </div>
                            <div class="stat-item" data-option="1">
                                <span class="option-label">B</span>
                                <div class="stat-bar">
                                    <div class="stat-fill" style="width: 0%"></div>
                                </div>
                                <span class="stat-count">0</span>
                            </div>
                            <div class="stat-item" data-option="2">
                                <span class="option-label">C</span>
                                <div class="stat-bar">
                                    <div class="stat-fill" style="width: 0%"></div>
                                </div>
                                <span class="stat-count">0</span>
                            </div>
                            <div class="stat-item" data-option="3">
                                <span class="option-label">D</span>
                                <div class="stat-bar">
                                    <div class="stat-fill" style="width: 0%"></div>
                                </div>
                                <span class="stat-count">0</span>
                            </div>
                        </div>
                        <div class="response-summary">
                            <span id="responses-count">0</span> of <span id="total-players">0</span> players responded
                        </div>
                    </div>
                </div>
                <button id="next-question" class="btn primary" style="display: none;">Next Question</button>
            </div>
        </div>

        <div id="join-screen" class="screen">
            <div class="join-container">
                <h2>Join Game</h2>
                <input type="text" id="game-pin-input" placeholder="Enter Game PIN" class="input-field">
                <input type="text" id="player-name" placeholder="Your Name" class="input-field">
                <button id="join-game" class="btn primary">Join Game</button>
            </div>
        </div>

        <div id="player-lobby" class="screen">
            <div class="player-lobby-container">
                <h2>Waiting for game to start...</h2>
                <p id="player-info">You're in!</p>
                <div class="loading-animation">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
            </div>
        </div>

        <div id="player-game-screen" class="screen">
            <div class="player-game-container">
                <div class="question-info">
                    <span id="player-question-counter">Question 1 of 5</span>
                </div>
                
                <div id="player-question-display" class="player-question-area">
                    <div id="player-question-image" class="question-image-container" style="display: none;">
                        <img id="player-question-img" src="" alt="Question Image">
                    </div>
                    <h3 id="player-question-text">Question will appear here</h3>
                </div>
                
                <div id="player-multiple-choice" class="player-answer-type">
                    <div class="player-options">
                        <button class="player-option" data-option="0">A</button>
                        <button class="player-option" data-option="1">B</button>
                        <button class="player-option" data-option="2">C</button>
                        <button class="player-option" data-option="3">D</button>
                    </div>
                </div>
                
                <div id="player-multiple-correct" class="player-answer-type" style="display: none;">
                    <div class="player-checkbox-options">
                        <label class="checkbox-option" data-option="0">
                            <input type="checkbox" class="option-checkbox"> A
                        </label>
                        <label class="checkbox-option" data-option="1">
                            <input type="checkbox" class="option-checkbox"> B
                        </label>
                        <label class="checkbox-option" data-option="2">
                            <input type="checkbox" class="option-checkbox"> C
                        </label>
                        <label class="checkbox-option" data-option="3">
                            <input type="checkbox" class="option-checkbox"> D
                        </label>
                    </div>
                    <button id="submit-multiple" class="btn primary">Submit Answer</button>
                </div>
                
                <div id="player-true-false" class="player-answer-type" style="display: none;">
                    <div class="true-false-options">
                        <button class="tf-option" data-answer="true">TRUE</button>
                        <button class="tf-option" data-answer="false">FALSE</button>
                    </div>
                </div>
                
                <div id="player-numeric" class="player-answer-type" style="display: none;">
                    <div class="numeric-input-container">
                        <input type="number" id="numeric-answer-input" placeholder="Enter your answer" step="any">
                        <button id="submit-numeric" class="btn primary">Submit Answer</button>
                    </div>
                </div>
                
                <div id="answer-feedback" class="feedback hidden">
                    <div id="feedback-message"></div>
                    <div id="score-display"></div>
                </div>
            </div>
        </div>

        <div id="leaderboard-screen" class="screen">
            <div class="leaderboard-container">
                <h2>üèÜ Leaderboard</h2>
                <div id="leaderboard-list" class="leaderboard"></div>
                <div id="final-results" class="final-results hidden">
                    <h3>üéâ Game Complete!</h3>
                    <button id="new-game" class="btn primary">New Game</button>
                </div>
            </div>
        </div>
        
        <div id="player-final-screen" class="screen">
            <div class="player-final-container">
                <h2>üéâ Quiz Complete!</h2>
                <div id="player-final-rank" class="player-rank">
                    <h3>Your Final Rank</h3>
                    <div id="final-position" class="final-position">#1</div>
                    <div id="final-score" class="final-score">500 points</div>
                </div>
                <div id="top-players" class="top-players">
                    <h3>üèÜ Top Players</h3>
                    <div id="final-leaderboard" class="final-leaderboard"></div>
                </div>
                <button id="play-again" class="btn primary">Play Again</button>
            </div>
        </div>
        
        <!-- Load Quiz Modal -->
        <div id="load-quiz-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Load Saved Quiz</h3>
                <div id="quiz-list" class="quiz-list"></div>
                <div class="modal-actions">
                    <button id="cancel-load" class="btn secondary">Cancel</button>
                </div>
            </div>
        </div>
        
        <!-- Quiz Preview Modal -->
        <div id="quiz-preview-modal" class="modal" style="display: none;">
            <div class="modal-content large">
                <h3>Quiz Preview</h3>
                <div id="preview-content" class="preview-content"></div>
                <div class="modal-actions">
                    <button id="cancel-preview" class="btn secondary">Close</button>
                </div>
            </div>
        </div>
        
        <!-- Preview Settings Sidebar -->
        <div id="preview-settings-sidebar" class="settings-sidebar" style="display: none;">
            <div class="settings-header">
                <h4>‚öôÔ∏è Preview Settings</h4>
                <button id="close-preview-settings" class="close-btn">√ó</button>
            </div>
            
            <div class="settings-content">
                <!-- Start Game Button at Top -->
                <div class="settings-group">
                    <button id="start-hosting-top" class="btn primary start-game-top">üöÄ Start Game</button>
                </div>
                
                <div class="settings-group">
                    <label>Split Ratio: <span id="split-ratio-value">50% / 50%</span></label>
                    <div class="slider-container">
                        <input type="range" id="split-ratio-slider" min="30" max="80" value="50" class="custom-slider">
                    </div>
                </div>
                
                <div class="settings-group">
                    <label>Font Size: <span id="font-size-value">1.0x</span></label>
                    <div class="slider-container">
                        <input type="range" id="font-size-slider" min="0.7" max="1.8" step="0.1" value="1.0" class="custom-slider">
                    </div>
                </div>
                
                <div class="settings-group">
                    <label>Spacing: <span id="spacing-value">Normal</span></label>
                    <div class="slider-container">
                        <input type="range" id="spacing-slider" min="0.5" max="2.0" step="0.1" value="1.0" class="custom-slider">
                    </div>
                </div>
                
                <div class="settings-group">
                    <label>Button Size: <span id="button-size-value">Normal</span></label>
                    <div class="slider-container">
                        <input type="range" id="button-size-slider" min="0.7" max="1.5" step="0.1" value="1.0" class="custom-slider">
                    </div>
                </div>
            </div>
            
            <div class="settings-actions">
                <button id="reset-preview-settings" class="btn secondary small">Reset</button>
            </div>
        </div>
        
        <!-- AI Question Generator Modal -->
        <div id="ai-generator-modal" class="modal" style="display: none;">
            <div class="modal-content large">
                <h3>ü§ñ AI Question Generator</h3>
                
                <div class="ai-config-section">
                    <div class="provider-selection">
                        <label for="ai-provider">Choose AI Provider:</label>
                        <select id="ai-provider" class="input-field">
                            <option value="ollama">Ollama (Free, Local)</option>
                            <option value="huggingface">Hugging Face (Free tier)</option>
                            <option value="openai">OpenAI (Paid)</option>
                            <option value="claude">Anthropic Claude (Paid)</option>
                        </select>
                    </div>
                    
                    <div class="api-key-section" id="api-key-section" style="display: none;">
                        <label for="ai-api-key">API Key:</label>
                        <input type="password" id="ai-api-key" class="input-field" placeholder="Enter your API key">
                        <small>Your API key is stored locally and never sent to our servers</small>
                    </div>
                </div>
                
                <div class="content-input-section">
                    <label for="source-content">Source Material:</label>
                    <textarea id="source-content" class="input-field" rows="8" placeholder="Paste your text content here, or upload a file below..."></textarea>
                    
                    <div class="content-type-indicator" id="content-type-indicator" style="display: none;">
                        <span class="content-type-label">Content type detected:</span>
                        <span class="content-type-value" id="content-type-value">general</span>
                        <span class="content-type-description" id="content-type-description">Questions will use standard formatting</span>
                    </div>
                    
                    <div class="file-upload-section">
                        <label for="content-file">Or upload a file:</label>
                        <input type="file" id="content-file" accept=".txt,.pdf,.docx,.md" class="input-field">
                        <small>Supported formats: TXT, PDF, DOCX, Markdown</small>
                    </div>
                </div>
                
                <div class="generation-options">
                    <div class="option-group">
                        <label for="question-count">Number of Questions:</label>
                        <input type="number" id="question-count" value="5" min="1" max="20" class="input-field number-input">
                    </div>
                    
                    <div class="option-group">
                        <label for="difficulty-level">Difficulty Level:</label>
                        <select id="difficulty-level" class="input-field">
                            <option value="mixed">Mixed</option>
                            <option value="easy">Easy</option>
                            <option value="medium">Medium</option>
                            <option value="hard">Hard</option>
                        </select>
                    </div>
                    
                    <div class="option-group">
                        <label>Question Types:</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="type-multiple-choice" checked> Multiple Choice
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="type-true-false"> True/False
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="type-multiple-correct"> Multiple Correct Answers
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="type-numeric"> Numeric Answer
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="generation-status" id="generation-status" style="display: none;">
                    <div class="loading-spinner"></div>
                    <span>Generating questions...</span>
                </div>
                
                <div class="modal-actions">
                    <button id="cancel-ai-generator" class="btn secondary">Cancel</button>
                    <button id="generate-questions" class="btn primary">Generate Questions</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>