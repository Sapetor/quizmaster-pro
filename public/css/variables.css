/**
 * CSS Custom Properties (Variables) and Typography
 * Safe extraction - pure value declarations that won't break layout
 */

/* Modern Design System */
:root {
    /* === MODERN COLOR PALETTE === */
    --color-primary-50: #eff6ff;
    --color-primary-100: #dbeafe;
    --color-primary-500: #3b82f6;
    --color-primary-600: #2563eb;
    --color-primary-700: #1d4ed8;
    --color-primary-900: #1e3a8a;
    
    /* Semantic Colors */
    --color-success-500: #10b981;
    --color-warning-500: #f59e0b;
    --color-error-500: #ef4444;
    
    /* === COLORFUL OPTIONS SYSTEM === */
    /* Option A - Blue */
    --option-0-start: #3b82f6;
    --option-0-end: #2563eb;
    --option-0-shadow: rgba(59, 130, 246, 0.3);
    --option-0-shadow-hover: rgba(59, 130, 246, 0.5);
    
    /* Option B - Green */
    --option-1-start: #10b981;
    --option-1-end: #059669;
    --option-1-shadow: rgba(16, 185, 129, 0.3);
    --option-1-shadow-hover: rgba(16, 185, 129, 0.5);
    
    /* Option C - Orange */
    --option-2-start: #f59e0b;
    --option-2-end: #d97706;
    --option-2-shadow: rgba(245, 158, 11, 0.3);
    --option-2-shadow-hover: rgba(245, 158, 11, 0.5);
    
    /* Option D - Red */
    --option-3-start: #ef4444;
    --option-3-end: #dc2626;
    --option-3-shadow: rgba(239, 68, 68, 0.3);
    --option-3-shadow-hover: rgba(239, 68, 68, 0.5);
    
    /* Option E - Purple */
    --option-4-start: #8b5cf6;
    --option-4-end: #7c3aed;
    --option-4-shadow: rgba(139, 92, 246, 0.3);
    --option-4-shadow-hover: rgba(139, 92, 246, 0.5);
    
    /* Option F - Cyan */
    --option-5-start: #06b6d4;
    --option-5-end: #0891b2;
    --option-5-shadow: rgba(6, 182, 212, 0.3);
    --option-5-shadow-hover: rgba(6, 182, 212, 0.5);
    
    /* True/False Colors */
    --true-color-start: var(--option-1-start);
    --true-color-end: var(--option-1-end);
    --true-shadow: var(--option-1-shadow);
    --true-shadow-hover: var(--option-1-shadow-hover);
    
    --false-color-start: var(--option-3-start);
    --false-color-end: var(--option-3-end);
    --false-shadow: var(--option-3-shadow);
    --false-shadow-hover: var(--option-3-shadow-hover);
    
    /* === GLASS MORPHISM SYSTEM === */
    --glass-light: rgba(255, 255, 255, 0.1);
    --glass-medium: rgba(255, 255, 255, 0.15);
    --glass-strong: rgba(255, 255, 255, 0.2);
    --glass-border: rgba(255, 255, 255, 0.2);
    
    /* Backdrop Blur System */
    --blur-subtle: blur(8px);
    --blur-medium: blur(16px);
    --blur-strong: blur(24px);
    
    /* === MODERN SHADOWS === */
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.2);
    --shadow-glow: 0 0 20px rgba(59, 130, 246, 0.3);
    
    /* === TYPOGRAPHY SCALE === */
    --text-xs: 0.75rem;
    --text-sm: 0.875rem;
    --text-base: 1rem;
    --text-lg: 1.125rem;
    --text-xl: 1.25rem;
    --text-2xl: 1.5rem;
    --text-3xl: 1.875rem;
    --text-4xl: 2.25rem;
    
    /* Line Heights */
    --leading-tight: 1.25;
    --leading-normal: 1.5;
    --leading-relaxed: 1.75;

/* CSS Custom Properties */
    /* Background Variables */
    --bg-primary: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    --bg-secondary: rgba(255,255,255,0.18);
    --bg-glass: rgba(255,255,255,0.12);
    
    /* Text Colors */
    --text-primary: white;
    --text-secondary: #2563eb;
    --text-contrast: #1e293b;
    
    /* Modal and Card Backgrounds */
    --modal-bg: rgba(255,255,255,0.98);
    --modal-text: #1e293b;
    --card-bg: rgba(255,255,255,0.15);
    --bg-contrast: rgba(255,255,255,0.92);
    
    /* Border and Accent Colors */
    --border-color: rgba(255,255,255,0.3);
    --accent-primary: #2563eb;
    --accent-secondary: #dc2626;
    
    /* Status Colors */
    --success-color: #16a34a;
    --warning-color: #ea580c;
    --error-color: #dc2626;
    
    /* Shadows and Effects */
    --shadow-soft: 0 8px 32px rgba(0,0,0,0.15);
    --shadow-hover: 0 12px 40px rgba(0,0,0,0.2);
    --shadow-light: rgba(0,0,0,0.1);
    --border-radius: 16px;
    --border-radius-small: 12px;
    --border-radius-medium: 15px;
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Glass Effect Variants */
    --bg-glass-light: rgba(255,255,255,0.1);
    
    /* Accent Colors */
    --accent-primary: #667eea;
    --accent-secondary-gradient: #764ba2;
    
    /* Preview Settings Variables */
    --split-left: 50fr;
    --split-right: 50fr;
    --preview-font-base: 1em;
    --preview-font-question: 1.1em;
    --preview-font-option: 0.95rem;
    --preview-font-small: 0.7rem;
    --preview-spacing: 8px;
    --preview-spacing-small: 4px;
    --preview-spacing-large: 12px;
    --preview-button-padding: 8px 12px;
    --preview-border-radius: 8px;
    --preview-question-padding: 15px;
    --preview-section-gap: 10px;
    --preview-line-height: 1.4;
    --preview-nav-padding: 5px 10px;
    --preview-button-height: 40px;
    --preview-content-padding: 8px;
    --preview-header-padding: 3px 4px;
    --preview-button-spacing: 6px 0;
    --preview-option-margin: 4px 0;
    
    /* Global Font Scale */
    --global-font-scale: 1.0;
}

/* === DARK THEME SUPPORT === */
[data-theme="light"] {
    /* Modern Glass Morphism for Light Mode */
    --glass-light: rgba(255, 255, 255, 0.8);
    --glass-medium: rgba(255, 255, 255, 0.9);
    --glass-strong: rgba(255, 255, 255, 0.95);
    --glass-border: rgba(0, 0, 0, 0.1);
    
    /* Enhanced Shadows for Light Mode */
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.15);
    --shadow-xl: 0 15px 40px rgba(0, 0, 0, 0.2);
    --shadow-glow: 0 0 20px rgba(37, 99, 235, 0.3);

    /* Light Theme Variables - Critical for theme switching */
    --bg-primary: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
    --bg-secondary: rgba(37, 99, 235, 0.05);
    --text-primary: #1e293b;
    --text-secondary: #2563eb;
    --modal-bg: rgba(255, 255, 255, 0.95);
    --modal-text: #1e293b;
    --card-bg: rgba(255, 255, 255, 0.8);
    --border-color: rgba(0, 0, 0, 0.1);
    --accent-primary: #2563eb;
    --accent-secondary: #dc2626;
    --success-color: #16a34a;
    --warning-color: #ea580c;
    --error-color: #dc2626;
    --bg-glass: rgba(255, 255, 255, 0.8);
    --text-contrast: #1e293b;
    --bg-contrast: rgba(255, 255, 255, 0.95);
}

[data-theme="dark"] {
    /* Modern Glass Morphism for Dark Mode */
    --glass-light: rgba(255, 255, 255, 0.05);
    --glass-medium: rgba(255, 255, 255, 0.08);
    --glass-strong: rgba(255, 255, 255, 0.12);
    --glass-border: rgba(255, 255, 255, 0.15);
    
    /* Enhanced Shadows for Dark Mode */
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.4);
    --shadow-xl: 0 15px 40px rgba(0, 0, 0, 0.5);
    --shadow-glow: 0 0 20px rgba(96, 165, 250, 0.4);

    /* Dark Theme Variables - Critical for theme switching */
    --bg-primary: linear-gradient(135deg, #0d1117 0%, #161b22 50%, #1c2128 100%);
    --bg-secondary: rgba(255,255,255,0.08);
    --text-primary: #f0f6fc;
    --text-secondary: #58a6ff;
    --modal-bg: #1c2128;
    --modal-text: #f8fafc;
    --card-bg: rgba(255,255,255,0.08);
    --border-color: rgba(255,255,255,0.2);
    --accent-primary: #58a6ff;
    --accent-secondary: #f85149;
    --success-color: #56d364;
    --warning-color: #e3b341;
    --error-color: #f85149;
    --bg-glass: rgba(255,255,255,0.08);
    --text-contrast: #f0f6fc;
    --bg-contrast: rgba(13,17,23,0.92);
}

/* Desktop Preview Ratios */
@media (min-width: 1400px) {
    :root {
        --split-left: 70%;
        --split-right: 30%;
    }
}

/* Typography Base */
body {
    font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* Global Font Scaling - Comprehensive and effective! */

/* Editor Elements - Consistent with improved scaling */
.quiz-editor-section input,
.quiz-editor-section textarea,
.quiz-editor-section label,
.question-text,
.option,
#quiz-title {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}
.quiz-editor-section h2,
.quiz-editor-section h3 {
    font-size: calc(1.4rem * var(--global-font-scale)) !important;
}

/* Preview Elements - Better scaling to match game elements */
.preview-content *,
.preview-content-split *,
#preview-question-text,
#preview-question-text-split {
    font-size: calc(1.2rem * var(--global-font-scale)) !important;
}
.preview-content .player-option,
.preview-content .checkbox-option,
.preview-content .tf-option,
.preview-content-split .player-option,
.preview-content-split .checkbox-option,
.preview-content-split .tf-option {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}
#preview-question-counter-display,
#preview-question-counter-display-split {
    font-size: calc(1rem * var(--global-font-scale)) !important;
}

/* Game Elements - Host View - BIGGER for better readability */
#current-question {
    font-size: calc(1.5rem * var(--global-font-scale)) !important;
}
#question-counter,
.game-container .player-option,
.game-container .tf-option {
    font-size: calc(1.3rem * var(--global-font-scale)) !important;
}
.answer-stats *,
.live-stats * {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}

/* Game Elements - Player View - MUCH BIGGER for better readability */
#player-question-text {
    font-size: calc(1.6rem * var(--global-font-scale)) !important;
}
#player-question-counter {
    font-size: calc(1.2rem * var(--global-font-scale)) !important;
}
.player-question-area .player-option,
.player-question-area .tf-option,
.player-question-area .checkbox-option {
    font-size: calc(1.4rem * var(--global-font-scale)) !important;
}
#numeric-answer-input {
    font-size: calc(1.3rem * var(--global-font-scale)) !important;
}

/* Header Elements */
header h1 {
    font-size: calc(1.8rem * var(--global-font-scale)) !important;
}
.language-name,
.language-option {
    font-size: calc(1rem * var(--global-font-scale)) !important;
}

/* Main Menu Elements */
.menu-options .btn {
    font-size: calc(1.3rem * var(--global-font-scale)) !important;
}

/* Join Screen Elements */
.join-container h2,
.browser-container h2 {
    font-size: calc(1.8rem * var(--global-font-scale)) !important;
}
.input-field,
#game-pin-input,
#player-name {
    font-size: calc(1.2rem * var(--global-font-scale)) !important;
}
#join-game,
#browse-games,
#refresh-games,
#back-to-join {
    font-size: calc(1.2rem * var(--global-font-scale)) !important;
}
.join-divider span {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}
.loading-games {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}

/* Game Lobby (Host) Elements */
.lobby-container h2,
.lobby-container h3 {
    font-size: calc(1.8rem * var(--global-font-scale)) !important;
}
.pin-display,
#game-pin {
    font-size: calc(2.5rem * var(--global-font-scale)) !important;
}
#start-game,
.large-start-btn {
    font-size: calc(1.4rem * var(--global-font-scale)) !important;
}
.qr-section h3 {
    font-size: calc(1.3rem * var(--global-font-scale)) !important;
}
.qr-loading,
#game-url,
.game-url {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}

/* Player Lobby Elements */
.player-lobby-container h2 {
    font-size: calc(1.8rem * var(--global-font-scale)) !important;
}
#player-info {
    font-size: calc(1.3rem * var(--global-font-scale)) !important;
}
.lobby-detail-label,
.lobby-detail-value {
    font-size: calc(1.2rem * var(--global-font-scale)) !important;
}
.lobby-status,
.lobby-status span {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}

/* Games Grid (Available Games List) - Complete font scaling */
.games-grid .game-card,
.games-grid .game-item {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}
.games-grid .game-title,
.game-card .game-title {
    font-size: calc(1.2rem * var(--global-font-scale)) !important;
}
.games-grid .game-info,
.game-card .game-info {
    font-size: calc(1rem * var(--global-font-scale)) !important;
}

/* Game Card Detail Elements */
.game-card .game-detail,
.game-detail {
    font-size: calc(0.95rem * var(--global-font-scale)) !important;
}
.game-card .game-detail-icon,
.game-detail-icon {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}
.game-card .game-players-count,
.game-players-count {
    font-size: calc(0.95rem * var(--global-font-scale)) !important;
}
.game-card .game-status,
.game-status {
    font-size: calc(0.9rem * var(--global-font-scale)) !important;
}
.game-card .game-pin-display,
.game-pin-display {
    font-size: calc(1.4rem * var(--global-font-scale)) !important;
}

/* Toolbar Elements */
.toolbar-section h5 {
    font-size: calc(0.7rem * var(--global-font-scale)) !important;
}
.toolbar-icon {
    font-size: calc(1.4rem * var(--global-font-scale)) !important;
}
.toolbar-label {
    font-size: calc(0.7rem * var(--global-font-scale)) !important;
}

/* Quiz Action Buttons (Bottom of Editor) */
.quiz-actions .btn,
#add-question,
#save-quiz,
#load-quiz,
#import-quiz,
#preview-quiz,
#start-hosting {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}

/* Back to Top Button */
.back-to-top-btn,
#back-to-top {
    font-size: calc(1.2rem * var(--global-font-scale)) !important;
}

/* Question Titles - Make them larger */
.game-container h2,
.game-container h3 {
    font-size: calc(1.5rem * var(--global-font-scale)) !important;
}

/* Timer and Host Game Elements */
#timer {
    font-size: calc(1.8rem * var(--global-font-scale)) !important;
}

/* Answer Statistics and Options */
.answer-stats h3 {
    font-size: calc(1.3rem * var(--global-font-scale)) !important;
}
.option-label,
.answer-option-label {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}
.answer-feedback-text {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}

/* Leaderboard Elements */
.leaderboard-container h2,
.player-final-container h2 {
    font-size: calc(2.5rem * var(--global-font-scale)) !important;
}
.final-results h3 {
    font-size: calc(2.2rem * var(--global-font-scale)) !important;
}
.player-rank h3 {
    font-size: calc(1.2rem * var(--global-font-scale)) !important;
}
.final-score {
    font-size: calc(1.8rem * var(--global-font-scale)) !important;
}
.top-players h3 {
    font-size: calc(1.8rem * var(--global-font-scale)) !important;
}
.result-text {
    font-size: calc(2.5rem * var(--global-font-scale)) !important;
}

/* Result and Feedback Messages */
#feedback-message {
    font-size: calc(1.5rem * var(--global-font-scale)) !important;
}
#score-display {
    font-size: calc(1.2rem * var(--global-font-scale)) !important;
}

/* Host Screen Elements */
.screen-title {
    font-size: calc(1.2rem * var(--global-font-scale)) !important;
}

/* Numeric Input Elements */
#preview-numeric-input,
#preview-numeric-input-split {
    font-size: calc(1.5rem * var(--global-font-scale)) !important;
}

/* Button Elements */
.submit-button,
.game-button {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}

/* Editor Control Buttons (Live Preview, AI Generator, Toolbar) */
#toggle-preview,
#ai-generator-btn,
#toggle-toolbar {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}

/* Header Controls (Fullscreen, Theme Toggle, Font Size) */
#fullscreen-toggle,
#theme-toggle,
#font-size-toggle {
    font-size: calc(1.2rem * var(--global-font-scale)) !important;
}

/* Toolbar Button Container Adjustments */
.toolbar-btn {
    height: calc(48px * var(--global-font-scale)) !important;
    width: calc(65px * var(--global-font-scale)) !important;
    padding: calc(6px * var(--global-font-scale)) calc(4px * var(--global-font-scale)) !important;
}

/* Toolbar Container Width - Scales with font size */
.left-toolbar {
    width: calc(85px * var(--global-font-scale)) !important;
}

/* Host container adjustment for scaled toolbar */
.host-container.with-toolbar {
    margin-left: calc(85px * var(--global-font-scale)) !important;
    max-width: calc(100vw - 85px * var(--global-font-scale)) !important;
}

/* Modal and Dialog Elements */
.modal-content h3,
.modal-content h4,
.api-key-section small,
.content-type-indicator,
.file-upload-section small,
.generation-status span,
.modal-header h3,
.modal-body p,
.modal-body label,
.load-quiz-modal h3,
.preview-quiz-modal h3 {
    font-size: calc(1.2rem * var(--global-font-scale)) !important;
}

.api-key-section small,
.file-upload-section small {
    font-size: calc(0.85rem * var(--global-font-scale)) !important;
}

.content-type-indicator {
    font-size: calc(0.9rem * var(--global-font-scale)) !important;
}

/* AI Generator Modal Elements */
.ai-section label,
.ai-section select,
.ai-section input,
.ai-section textarea,
#ai-model-select,
#ai-topic,
#ai-difficulty,
#ai-num-questions,
#generation-progress,
.generation-log {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}

/* Large Display Elements - PIN, Final Position */
.game-pin {
    font-size: calc(48px * var(--global-font-scale)) !important;
}
.pin-display {
    font-size: calc(4rem * var(--global-font-scale)) !important;
}
.final-position {
    font-size: calc(4rem * var(--global-font-scale)) !important;
}

/* Small Component Elements */
.btn.small {
    font-size: calc(0.85rem * var(--global-font-scale)) !important;
}
.language-flag {
    font-size: calc(16px * var(--global-font-scale)) !important;
}
.time-input-label {
    font-size: calc(0.9rem * var(--global-font-scale)) !important;
}
.game-title {
    font-size: calc(1.25rem * var(--global-font-scale)) !important;
}
.game-info {
    font-size: calc(0.9rem * var(--global-font-scale)) !important;
}

/* Responsive Mobile Elements */
.device-btn {
    font-size: calc(0.8rem * var(--global-font-scale)) !important;
}
.option-label {
    font-size: calc(0.9rem * var(--global-font-scale)) !important;
}
.option-count {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}
.option-percentage {
    font-size: calc(0.8rem * var(--global-font-scale)) !important;
}

/* Base Typography Elements */
code, pre, .code {
    font-size: calc(0.85em * var(--global-font-scale)) !important;
}
small, .small-text {
    font-size: calc(0.875em * var(--global-font-scale)) !important;
}

/* Error Messages and Notifications */
.error-message,
.success-message,
.warning-message,
.info-message,
.toast-message,
.alert-message,
.notification {
    font-size: calc(1rem * var(--global-font-scale)) !important;
}

/* Loading States */
.loading-text,
.progress-text,
.status-text {
    font-size: calc(1rem * var(--global-font-scale)) !important;
}

/* Form Elements */
.form-group label,
.form-control,
select,
option,
input[type="text"],
input[type="number"],
input[type="email"],
input[type="password"],
textarea {
    font-size: calc(1rem * var(--global-font-scale)) !important;
}

/* Placeholder text */
input::placeholder,
textarea::placeholder {
    font-size: calc(1rem * var(--global-font-scale)) !important;
}

/* Option Display Elements */
.option-display {
    font-size: calc(1.1rem * var(--global-font-scale)) !important;
}

/* Monospace Font Stack for Code */
code, pre, .code {
    font-family: 'Monaco', 'Menlo', 'Consolas', 'Courier New', monospace;
}

/* LaTeX and MathJax Content - Larger default sizes for better readability */
.player-option .MathJax,
.checkbox-option .MathJax,
.tf-option .MathJax,
.preview-option .MathJax,
.game-container .MathJax {
    font-size: calc(1.2em * var(--global-font-scale)) !important;
}

/* Alternative boxes with LaTeX - bigger default font */
.player-option,
.checkbox-option, 
.tf-option,
.preview-option {
    min-height: 2.5rem !important;
    line-height: 1.4 !important;
}

/* Ensure MathJax in options is properly sized */
.player-option mjx-container,
.checkbox-option mjx-container,
.tf-option mjx-container,
.preview-option mjx-container {
    font-size: 1.1em !important;
}